import{d as a,t as e,l,H as t,c as s,L as r,I as u,j as n,k as o,F as i,J as c,K as d,G as v,P as f,N as p,O as b,Q as y,U as h,q as m,y as g}from"./vendor.0da49830.js";import{T as x,I as k,M as w}from"./index.21b59043.js";var j=a({name:"CardList",props:{dataSource:{type:Object,required:!0},grid:{type:Number,required:!1,default:1}},setup(a,{slots:n}){const{dataSource:o}=e(a),i=l([]),c=l({gutter:16,column:a.grid}),d=l({});return t(o,(a=>{i.value=a.data,d.value=a.pagination})),()=>s(r,{class:"flex flex-col overflow-auto",dataSource:i.value,grid:c.value},{renderItem:a=>s(u,null,{default:()=>{var e;return[null==(e=n.card)?void 0:e.call(n,a)]}})})}});var q=a({setup(){const a=n(),e=l([{label:"借货清单",key:"1",alias:"借出",count:o((()=>a.state.warehouse.shortcut.total.lend))},{label:"维修清单",key:"2",alias:"维修",count:o((()=>a.state.warehouse.shortcut.total.repair))},{label:"保养清单",key:"3",alias:"保养",count:o((()=>a.state.warehouse.shortcut.total.maintain))}]),t=l({}),r=l({}),u=l(!1),q=({item:e})=>{t.value=e,a.dispatch("warehouse/shortcut/getLists").then((a=>{r.value=a}))},C=()=>{g.confirm({centered:!0,icon:s(k,{type:"shanjian"},null),title:`确定要清空${t.value.label}吗？`,content:`点击清空${t.value.label}后，该清单内的物资将全部移出`,cancelText:"取消",okText:`清空${t.value.label}`,onOk:()=>{S()}})},O=()=>{u.value=!u.value},S=(e=(a=>null==(a=r.value)?void 0:a.data)())=>{!Array.isArray(e)&&(e=Array.of(e)),a.dispatch("warehouse/shortcut/removeLists",e)};return()=>s(i,null,[s(x,{class:"dark:bg-navy-4",columns:e.value,onClick:q},{extra:()=>s(c,null,{default:()=>[s(d,{danger:!0,ghost:!0,onClick:C},{default:()=>[v("清空"),t.value.label]}),s(d,{type:"primary",onClick:O},{default:()=>[v("全部"),t.value.alias]})]}),default:()=>s(j,{grid:5,class:"h-full",dataSource:r.value},{card:({item:a,index:e})=>{let l;return s(i,null,[s("section",{class:"dark:bg-navy-2 dark:hover:bg-navy-3 rounded"},[s("div",{class:"flex flex-row items-center justify-between py-8 border-b border-navy-1"},[s("h3",{class:"flex flex-row text-16 pl-16 overflow-auto"},[s("span",{class:"truncate"},[a.label]),a.quantity&&s("span",{class:a.quantity.total==a.quantity.remain?"text-success":"text-danger"},[v("("),a.quantity.remain,v("/"),a.quantity.total,v(")")])]),s(f,{title:`移出${a.label}?`,placement:"bottomRight",onConfirm:()=>S(a)},{icon:()=>s(k,{type:"shanjian"},null),default:()=>s(d,{danger:!0,type:"text"},{default:()=>[s(k,{class:"align-baseline",type:"delete"},null),v("移出")]})})]),s("section",{class:"flex flex-row p-16"},[s("div",null,[s(p,null,(t=l=a.thumbnail.map(((a,e)=>b(s("div",null,[s(h,{class:"w-full h-full object-cover rounded",src:a.fileUrl,fallback:"/icon_empty_search.png",width:108,height:108},null)]),[[y,!e]]))),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!m(t)?l:{default:()=>[l]}))])])])]);var t}})}),s(w,{visible:u.value,"onUpdate:visible":a=>u.value=a,title:`${t.value.alias}信息`},null)])}});export{q as default};
