import{d as e,u as t,n as a,i as l,o,c as s,F as u,q as i,r as n,M as r}from"./vendor.0a6eeafb.js";import{T as d,C as c,I as p,b as v,F as h}from"./index.352a7032.js";import"./index.44c48e72.js";var b=e({setup(){const e=t(),b=a([{label:"借货清单",count:l((()=>e.state.warehouseModule.shortcutModule.totals.borrowCount)),key:"1"},{label:"维修清单",count:l((()=>e.state.warehouseModule.shortcutModule.totals.repairCount)),key:"2"},{label:"保养清单",count:l((()=>e.state.warehouseModule.shortcutModule.totals.maintainCount)),key:"3"}]),m=a(!0),y=a(b.value[0].key),f=a([]),x=a([{label:"事件",key:"event",type:"select",required:!0},{label:"借货人",key:"name",required:!0},{label:"借货人工号",key:"number",required:!0},{label:"联系电话",key:"phone",required:!0},{label:"借货科室",key:"department",type:"select",required:!0}]),k=a({}),w=a(!1),g=()=>{r.confirm({class:"bg-navy-3 rounded pb-0 border border-primary",title:"确定要清空借货清单吗？",content:"清空借货清单后，该清单内的物资将全部移出",centered:!0,onOk:()=>{e.dispatch("warehouseModule/shortcutModule/deleteSpecifiedShortcutCard",f.value.map((e=>({id:e.key})))).then((()=>{M()}))}})},M=(t=y.value)=>{y.value=t,e.dispatch("warehouseModule/shortcutModule/findShortcutCards",t).then((e=>{f.value=e,m.value=!e.length}))},C=()=>{console.log(k.value),w.value=!w.value};return o((()=>{M()})),()=>s(u,null,[s(d,{activeKey:y.value,"onUpdate:activeKey":e=>y.value=e,block:!0,columns:b.value,empty:m.value,onTabClick:M},{default:()=>[s("section",{class:"overflow-y-auto grid grid-cols-5 gap-16"},[f.value.map((t=>s(c,{title:t.label},{title:()=>s("p",{class:"text-16 font-medium"},[s("span",null,[t.label]),t.capacities&&s("span",null,[i("("),t.capacities[0],i("/"),t.capacities[1],i(")")])]),extra:()=>s(n("a-popconfirm"),{title:"确认删除吗？","ok-text":"删除","cancel-text":"取消",placement:"bottomRight",onConfirm:()=>{return a=t.key,void e.dispatch("warehouseModule/shortcutModule/deleteSpecifiedShortcutCard",[{id:a}]).then((()=>{M()}));var a}},{default:()=>[s(n("a-button"),{class:"flex flex-row items-center p-0",type:"text",danger:!0},{default:()=>[i("移出")],icon:()=>s(p,{type:"delete"},null)})]}),default:()=>s("div",{class:"flex flex-row"},[s("div",{class:"flex-shrink-0 mr-16"},[s(n("a-image"),{width:108,height:108},null)]),s("div",null,[s("p",null,[s("span",{class:"text-white text-opacity-70"},[i("货架位置")]),s("span",{class:"text-16"},[t.position])]),s("p",null,[s("span",{class:"text-white text-opacity-70"},[i("类型")])]),s("p",null,[s("span",{class:"text-white text-opacity-70"},[i("尺寸")])]),s("p",null,[s("span",{class:"text-white text-opacity-70"},[i("箱子编码")])])])])})))])],extra:()=>s(n("a-space"),{size:8},{default:()=>[s(n("a-button"),{ghost:!0,danger:!0,onClick:g},{default:()=>[i("清空清单数据")]}),s(n("a-button"),{type:"primary",onClick:()=>w.value=!w.value},{default:()=>[i("一键操作")]})]})}),s(v,{visible:w.value,"onUpdate:visible":e=>w.value=e,size:"heavy",title:"请填写借货人信息"},{default:()=>[s(h,{model:k.value,"onUpdate:model":e=>k.value=e,columns:x.value,onSubmit:C},{button:()=>s(n("a-button"),{ghost:!0,"html-type":"submit"},{default:()=>[s(p,{class:"align-baseline",type:"save"},null),i("保存")]})})]})])}});export{b as default};
