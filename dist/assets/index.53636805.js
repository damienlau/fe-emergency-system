import{d as e,j as t,l as a,o as l,c as n,F as s,r as o,G as r}from"./vendor.0da49830.js";import{T as i}from"./index.fa94ef0b.js";import{c as d,T as u}from"./index.21b59043.js";var m=e({setup(){const e=t(),d=a([]),u=a([{title:"事件名称",key:"eventName",width:"15%",slots:{customRender:"eventName"}},{title:"数量详情",key:"numDetail",slots:{customRender:"numDetail"}},{title:"时间",key:"eventTime",slots:{customRender:"eventTime"}}]),m=a([{title:"箱子/物资名称",dataIndex:"goodsName",key:"goodsName"},{title:"所属箱子",dataIndex:"boxName",key:"boxName"},{title:"借贷科室",dataIndex:"departmentName",key:"departmentName"},{title:"借贷人",dataIndex:"personnelName",key:"personnelName"},{title:"借贷人联系方式",dataIndex:"personnelPhone",key:"personnelPhone"},{title:"状态",dataIndex:"status",key:"status",slots:{customRender:"status"}},{title:"归还人",dataIndex:"returnMan",key:"returnMan"},{title:"归还人联系方式",dataIndex:"returnPhone",key:"returnPhone"},{dataIndex:"time",key:"time",slots:{title:"customTitle",customRender:"time"}},{title:"归还时间",dataIndex:"returnTime",key:"returnTime"},{title:"操作",key:"operation",slots:{customRender:"operation"}}]),c=a({}),p=a([{key:"eventName",placeholder:"事件搜索"},{key:"materiaName",placeholder:"箱子搜索"}]),y=t=>{e.dispatch("warehouseModule/recordModule/getEventList",t).then((e=>{d.value=e.tableData}))},x=t=>{const a=t.id;a&&e.dispatch("warehouseModule/recordModule/deleteOutDetailData",{id:a}).then((()=>{b()}))},h=e=>n(o("a-table"),{dataSource:e.eventExpandTableData,columns:m.value,pagination:!1,align:"left",size:"small",class:"text-white",scroll:{y:500},rowKey:e=>e.key},{customTitle:()=>n(s,null,[n("span",{class:"text-warning"},[r("生成清单时间")]),n("span",null,[r("/出仓时间")])]),status:({text:e})=>k(e),operation:({record:e})=>(e=>n(o("a-button"),{ghost:!0,danger:!0,size:"small",onClick:()=>{x(e)}},{default:()=>[r("取消出仓")]}))(e),time:({record:e})=>v(e)}),k=e=>n("p",{style:1==e?"color:red":2==e?"color:green":"color:orange"},[1==e?"已出仓":2==e?"已归还":"待出仓"]),v=e=>(console.log(e,"record"),n("div",{class:"flex flex-row items-center justify-end"},[n("span",{style:3==e.status?"color:orange":""},[e.time])])),b=()=>{const e=c.value;y(e)};return l((()=>{y({})})),()=>n(s,null,[n(i,{model:c.value,"onUpdate:model":e=>c.value=e,columns:p.value,onSearch:b},null),n(o("a-table"),{class:"text-white",dataSource:d.value,columns:u.value,pagination:!1,showHeader:!1,rowClassName:()=>"dark:bg-navy-1 bg-opacity-70",expandedRowRender:({record:e})=>h(e)},{eventName:({record:e})=>(e=>n("div",null,[e.eventName]))(e),eventTime:({record:e})=>(e=>n("div",{class:"flex flex-row items-center justify-end"},[n("span",{class:"text-white text-opacity-70 mr-4"},[r("开始时间:")]),n("span",{class:"text-white  mr-40"},[e.eventTime&&e.eventTime.startTime||"--"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("结束时间:")]),n("span",{class:"text-white  mr-40"},[e.eventTime&&e.eventTime.endTime||"--"])]))(e),numDetail:({record:e})=>(e=>n("div",{class:"flex flex-row"},[n("span",{class:"text-white text-opacity-70 mr-4"},[r("总物资:")]),n("span",{class:"text-white  mr-40"},[e.numDetail&&e.numDetail.totalNumber||"0"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("未出仓:")]),n("span",{class:"text-white  mr-40"},[e.numDetail&&e.numDetail.notOutNumber||"0"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("已归还:")]),n("span",{class:"text-white  mr-40"},[e.numDetail&&e.numDetail.returnNumber||"0"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("未归还:")]),n("span",{class:"text-white  mr-40"},[e.numDetail&&e.numDetail.noReturnNumber||"0"])]))(e)})])}}),c=e({setup(){const e=t(),u=a([]),m=a([{title:"箱子/物资名称",dataIndex:"goodsName",key:"goodsName"},{title:"所属箱子",dataIndex:"boxName",key:"boxName"},{title:"借贷科室",dataIndex:"departmentName",key:"departmentName"},{title:"借贷人",dataIndex:"personnelName",key:"personnelName"},{title:"借贷人联系方式",dataIndex:"personnelPhone",key:"personnelPhone"},{title:"状态",dataIndex:"status",key:"status",slots:{customRender:"dailyStatus"}},{title:"归还人",dataIndex:"returnMan",key:"returnMan"},{title:"归还人联系方式",dataIndex:"returnPhone",key:"returnPhone"},{dataIndex:"time",key:"time",slots:{title:"customTitle",customRender:"dailyTime"}},{title:"归还时间",dataIndex:"returnTime",key:"returnTime"},{title:"操作",key:"operation",slots:{customRender:"dailyOperation"}}]),c=a({}),p=a([{key:"personnelName",placeholder:"人员搜索"},{key:"materialName",placeholder:"物资搜索"},{type:"select",key:"departmentType",label:"借贷科室",placeholder:"全部",options:d.departmentOptions},{type:"select",key:"status",label:"状态",placeholder:"全部",options:[{label:"待借出",key:"1"},{label:"已借出",key:"2"},{label:"已归还",key:"3"}]}]),y=t=>{e.dispatch("warehouseModule/recordModule/getDailyList",t).then((e=>{u.value=e.tableData}))},x=t=>{const a=t.id;a&&e.dispatch("warehouseModule/recordModule/deleteOutDetailData",{id:a}).then((()=>{h()}))},h=()=>{const e=c.value;y(e)};return l((()=>{y({})})),()=>n(s,null,[n(i,{model:c.value,"onUpdate:model":e=>c.value=e,columns:p.value,onSearch:h},null),n(o("a-table"),{class:"text-white",dataSource:u.value,columns:m.value,scroll:{y:600},pagination:!1},{customTitle:()=>n(s,null,[n("span",{class:"text-warning"},[r("生成清单时间")]),n("span",null,[r("/出仓时间")])]),dailyStatus:({text:e})=>{return n("p",{style:1==(t=e)?"color:red":2==t?"color:green":"color:orange"},[1==t?"已出仓":2==t?"已归还":"待出仓"]);var t},dailyOperation:({record:e})=>(e=>n(o("a-button"),{ghost:!0,danger:!0,size:"small",onClick:()=>{x(e)}},{default:()=>[r("取消出仓")]}))(e),dailyTime:({record:e})=>(e=>(console.log(e,"record"),n("div",{class:"flex flex-row items-center justify-end"},[n("span",{style:3==e.status?"color:orange":""},[e.time])])))(e)})])}}),p=e({props:{menuActiveKey:{type:String,required:!0}},setup(e){const r=t(),d=a([]),u=a([{title:"物资名称",dataIndex:"materialName",key:"materialName"},{title:"所属箱子",dataIndex:"boxName",key:"boxName"},{title:"保养公司",dataIndex:"personnelCompany",key:"personnelCompany"},{title:"保养人",dataIndex:"personnelName",key:"personnelName"},{title:"保养人联系方式",dataIndex:"personnelPhone",key:"personnelPhone"},{title:"状态",key:"status",dataIndex:"status",slots:{customRender:"status"}},{title:"是否出仓库",dataIndex:"isOutWarehouseText",key:"isOutWarehouseText"},{title:"问题描述",dataIndex:"description",key:"description"},{title:"保养开始时间",dataIndex:"startTime",key:"startTime"},{title:"保养完成时间",dataIndex:"endTime",key:"endTime"},{title:"操作",key:"id",slots:{customRender:"operation"}}]),m=a({}),c=a([{key:"personnelName",placeholder:"保养公司/保养人搜索"},{key:"materialName",placeholder:"物资搜索"},{type:"select",key:"isOutWarehouse",label:"是否出仓库",placeholder:"全部",options:[{label:"是",key:"1"},{label:"否",key:"0"}]}]),p=t=>{r.dispatch("warehouseModule/recordModule/getMaintainList",{activeKey:e.menuActiveKey,search:t}).then((e=>{d.value=e.tableData}))},y=t=>{const a=t.id;a&&r.dispatch("warehouseModule/recordModule/changeMaintainStatus",{id:a,key:e.menuActiveKey}).then((()=>{x()}))},x=()=>{const e=menuActiveKey.value,t=m.value;"1"===e||"2"===e?p(t):"event"===e?getEventList(t):"daily"===e&&getDailyList(t)};return l((()=>{p({})})),()=>n(s,null,[n(i,{model:m.value,"onUpdate:model":e=>m.value=e,columns:c.value,onSearch:x},null),n(o("a-table"),{class:"text-white",dataSource:d.value,columns:u.value,pagination:!0},{status:({text:e})=>{return n("p",{style:2==(t=e)?"color:green":"color:red"},[2==t?"已完成":"维修中"]);var t},operation:({record:t})=>(t=>2!=t.status&&n(o("a-button"),{size:"small",ghost:!0,onClick:()=>{y(t)}},{default:()=>["1"===e.menuActiveKey?"维修完成":"保养完成"]}))(t)})])}}),y=e({components:{EventList:m,DailyList:c,MaintainList:p},setup(){const e=a([{label:"事件记录",key:"event"},{label:"日常记录",key:"daily"},{label:"维修记录",key:"1"},{label:"保养记录",key:"2"}]);a("");const t=({activeKey:e,item:t})=>{console.log(e,t)};return()=>n(s,null,[n(u,{class:"dark:bg-navy-4",columns:e.value,onClick:t},{default:()=>[n("div",{class:"flex flex-col"},[n(m,null,null)])]})])}});export{y as default};
