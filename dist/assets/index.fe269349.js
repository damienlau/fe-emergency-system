import{d as e,u as t,n as a,v as l,o as s,c as n,F as o,r as u,q as r}from"./vendor.0a6eeafb.js";import{T as i,a as d}from"./index.352a7032.js";import"./index.44c48e72.js";var c=e({setup(){const e=t(),c=a([{label:"事件记录",key:"event"},{label:"日常记录",key:"daily"},{label:"维修记录",key:"1"},{label:"保养记录",key:"2"}]),v=a([]),p=a([]);a([]),a([]);const m=a({}),y=a([{type:"input",key:"test",label:"测试",placeholder:"侧是是是"},{type:"input",key:"test2",label:"测试2",placeholder:"侧是是是"},{type:"select",key:"test3",label:"测试3",placeholder:"全部",options:[{label:"dddddd",key:"1"},{label:"dddddd",key:"2"}]}]),h=a(!1),x=a(c.value[0].key),w=(t=x.value)=>{x.value=t,"1"===t||"2"===t?e.dispatch("warehouseModule/recordModule/getMaintainList",t).then((e=>{v.value=e.tableData,p.value=e.tableColumn})):"event"===t?e.dispatch("warehouseModule/recordModule/getEventList").then((e=>{console.log(e.tableData,"1"),v.value=e.tableData,p.value=e.tableColumn})):(v.value=[],p.value=[])},b=t=>{const a=t.id;a&&e.dispatch("warehouseModule/recordModule/changeMaintainStatus",{id:a,key:x.value}).then((()=>{w()}))};return l((()=>m.value),(({data:e})=>{console.log(e,"data")})),s((()=>{w()})),()=>n(o,null,[n(i,{activeKey:x.value,"onUpdate:activeKey":e=>x.value=e,block:!0,columns:c.value,empty:h.value,onSelect:w,rowKey:e=>e,size:"small"},{default:()=>[n("section",{class:"overflow-y-auto"},[n(d,{select:m.value,"onUpdate:select":e=>m.value=e,columns:y.value},null),n("span",null,[m.value]),n(u("a-table"),{class:"text-white",rowKey:(e,t)=>e.key||e.id||t,dataSource:v.value,columns:p.value,pagination:"event"!==x.value,showHeader:"event"!==x.value,rowClassName:()=>{if("event"===x.value)return"dark:bg-navy-1 bg-opacity-70"},expandedRowRender:"event"===x.value?({record:t})=>(t=>{e.dispatch("warehouseModule/recordModule/getEventExpandList",t.id).then((e=>{}))})(t):null},{status:({text:e})=>{return n("p",{style:1==(t=e)?"color:red":"color:green"},[1==t?"保养中":"已完成"]);var t},operation:({record:e})=>(e=>2!==e.status&&n(u("a-button"),{size:"small",ghost:!0,onClick:()=>{b(e)}},{default:()=>["1"===x.value?"维修完成":"保养完成"]}))(e),numDetail:({record:e})=>(e=>n("div",{class:"flex flex-row"},[n("span",{class:"text-white text-opacity-70 mr-4"},[r("总物资:")]),n("span",{class:"text-white  mr-40"},[e.numDetail.totalNumber||"0"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("未出仓:")]),n("span",{class:"text-white  mr-40"},[e.numDetail.notOutNumber||"0"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("已归还:")]),n("span",{class:"text-white  mr-40"},[e.numDetail.returnNumber||"0"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("未归还:")]),n("span",{class:"text-white  mr-40"},[e.numDetail.noReturnNumber||"0"])]))(e),eventTime:({record:e})=>(e=>n("div",{class:"flex flex-row items-center justify-end"},[n("span",{class:"text-white text-opacity-70 mr-4"},[r("开始时间:")]),n("span",{class:"text-white  mr-40"},[e.eventTime.startTime||"--"]),n("span",{class:"text-white text-opacity-70 mr-4"},[r("结束时间:")]),n("span",{class:"text-white  mr-40"},[e.eventTime.endTime||"--"])]))(e)})])]})])}});export{c as default};
