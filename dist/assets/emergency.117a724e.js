import{d as e,j as t,l,o as a,c as s,F as i,r as n,G as o,y as r}from"./vendor.0da49830.js";import{C as d}from"./index.fa94ef0b.js";import{I as u,M as c,T as m}from"./index.21b59043.js";var h=e({setup(){const e=t(),h=l({label:"待出仓物资",type:"string",key:"pengding",data:[]}),f=l({label:"已出仓物资",type:"string",key:"finished",data:[]}),p=l(!1),v=l([{label:"符合清单物资",key:"1",count:5,data:[]},{label:"未符合清单物资",key:"2",count:10,data:[]},{label:"未扫描到的物资",key:"3",count:20,data:[]}]),b=l(!0),y=l(v.value[0].key),g=l([]),x=()=>{p.value=!p.value},w=(t=y.value)=>{y.value=t,e.dispatch("warehouseModule/shortcutModule/findShortcutCards",t).then((e=>{g.value=e,b.value=!e.length}))};l("background-color:red");const k=()=>{r.confirm({class:"bg-navy-3 rounded pb-0 border border-primary",title:"确定要全部移除吗？",content:"移除未符合清单的全部物资",centered:!0,onOk:()=>{e.dispatch("warehouseModule/shortcutModule/deleteSpecifiedShortcutCard",g.value.map((e=>({id:e.key})))).then((()=>{w()}))}})};return a((()=>{e.dispatch("warehouseModule/pendingModule/getMaintainList").then((e=>{console.log(e),h.value.data=e.content[0].warehouseBoxInfo.boxImages.map((e=>({title:e.newFileName,page:e.id,url:e.fileUrl,content:e.newFileName.split("")}))),f.value.data=e.content[1].warehouseBoxInfo.boxImages.map((e=>({title:e.newFileName,page:e.id,url:e.fileUrl,content:e.newFileName.split(""),status:e.status})))}))})),()=>s(i,null,[s("div",{class:"h-full flex"},[s("div",{class:"flex-1"},[s(n("a-layout"),{class:"h-full bg-navy-4"},{default:()=>[s(n("a-layout-header"),{class:"h-64 bg-navy-4 flex items-center justify-center text-18 text-white border-b border-navy-1"},{default:()=>[s("div",null,[h.value.label])]}),s(n("a-layout-content"),{class:"ml-16 mr-16 h-full"},{default:()=>[s("div",{class:"relative inline-block w-full h-full"},[s("div",{class:"mt-16 w-full absolute top-0 bottom-0 overflow-y-auto"},[h.value.data.map((e=>s("div",{class:"mb-16 mr-8 bg-navy-2 h-modal-lightmin"},[s("div",{class:"h-64 flex items-center justify-center text-white border-b border-navy-1"},[s("div",{class:"flex items-center justify-center"},[s("span",{class:"text-20"},[e.title]),s("span",{class:"text-success"},[e.page])])]),s("div",{class:"flex py-16 px-16"},[s("div",{class:"h-modal-lightermin w-modal-lightermin bg-white"},[s("img",{class:"h-modal-lightermin w-modal-lightermin",src:e.url},null)]),s("div",{class:"bg-navy-4 ml-16 overflow-y-auto h-modal-lightermin flex-1"},[e.content.map(((e,t)=>s("div",{class:"h-54 ml-16 mr-16 border-b border-navy-1  flex items-center"},[s("span",{class:"text-14 w-full overflow-hidden h-22"},[e])])))])])])))])])]})]})]),s(u,{style:"font-size:76px;color:#0e518f;width:140px;",class:"flex items-center justify-center",type:"arrow-right-filling"},null),s("div",{class:"flex-1"},[s(n("a-layout"),{class:"h-full bg-navy-4"},{default:()=>[s(n("a-layout-header"),{class:"h-64 bg-navy-4 flex items-center justify-center text-18 text-white border-b border-navy-1 relative"},{default:()=>[s("div",null,[f.value.label]),s("div",{class:"absolute right-5"},[s(n("a-button"),{type:"primary",onClick:()=>{p.value=!p.value}},{default:()=>[o("扫描完成")]})])]}),s(n("a-layout-content"),{class:"ml-16 mr-16 h-full"},{default:()=>[s("div",{class:"relative inline-block w-full h-full"},[s("div",{class:"mt-16 w-full absolute top-0 bottom-0 overflow-y-auto"},[f.value.data.map((e=>s(i,null,[s("div",{class:[1==e.status?"bg-red-400 border-danger border bg-opacity-10":"bg-navy-2","mb-18 mr-8  h-modal-lightmin   ghost "]},[s("div",{class:"h-64 flex items-center justify-center text-white border-b border-navy-1 relative"},[s("div",{class:"flex items-center justify-center"},[s("span",{class:"text-20"},[e.title]),s("span",{class:"text-success"},[e.page]),s(n("a-space"),{size:8,class:[1==e.status?"":"hidden","absolute right-5"]},{default:()=>[s(n("a-button"),{ghost:!0,danger:!0},{default:()=>[s(u,{type:"delete",onClick:"handleClickDelete"},null),o("移除")]})]})])]),s("div",{class:"flex py-16 px-16"},[s("div",{class:"h-modal-lightermin w-modal-lightermin bg-white"},[s("img",{class:"h-modal-lightermin w-modal-lightermin",src:e.url},null)]),s("div",{class:[1==e.status?"flex items-center":"","bg-navy-4 ml-16 overflow-y-auto h-modal-lightermin flex-1  overflow-x-hidden"]},[1==e.status?s("div",{style:"margin:0 auto;"},[s(n("a-empty"),{description:"空空如也",image:"assets/icon_empty_data.png"},null)]):e.content.map(((e,t)=>s(i,null,[s("div",{class:"h-54 ml-16 mr-16 border-b border-navy-1 w-full items-center"},[s("span",{class:"text-14 w-full overflow-hidden h-22"},[e])])])))])]),s("div",{class:[1==e.status?"":"hidden","text-danger text-12 mb-16"]},[o("该物资/箱子不属于本次借贷清单")])])])))])])]})]})])]),s(c,{visible:p.value,"onUpdate:visible":e=>p.value=e,size:"heavy",title:"出仓扫描清单"},{default:()=>[s(m,{activeKey:y.value,"onUpdate:activeKey":e=>y.value=e,block:!0,columns:v.value,empty:b.value,onClick:w},{default:()=>[s("section",{class:"overflow-y-auto grid grid-cols-5 gap-16"},[g.value.map((t=>s(d,{title:t.label},{title:()=>s("p",{class:"text-16 font-medium"},[s("span",null,[t.label]),t.capacities&&s("span",null,[o("("),t.capacities[0],o("/"),t.capacities[1],o(")")])]),extra:()=>s(n("a-popconfirm"),{title:"确认删除吗？","ok-text":"删除","cancel-text":"取消",placement:"bottomRight",onConfirm:()=>{return l=t.key,void e.dispatch("warehouseModule/shortcutModule/deleteSpecifiedShortcutCard",[{id:l}]).then((()=>{w()}));var l}},{default:()=>[s(n("a-button"),{class:"flex flex-row items-center p-0",type:"text",danger:!0},{default:()=>[o("移出")],icon:()=>s(u,{type:"delete"},null)})]}),default:()=>s("div",{class:"flex flex-row"},[s("div",{class:"flex-shrink-0 mr-16"},[s(n("a-image"),{width:108,height:108},null)]),s("div",null,[s("p",null,[s("span",{class:"text-white text-opacity-70"},[o("货架位置")]),s("span",{class:"text-16"},[t.position])]),s("p",null,[s("span",{class:"text-white text-opacity-70"},[o("类型")])]),s("p",null,[s("span",{class:"text-white text-opacity-70"},[o("尺寸")])]),s("p",null,[s("span",{class:"text-white text-opacity-70"},[o("箱子编码")])])])])})))])],extra:()=>s(n("a-space"),{size:8},{default:()=>[s(n("a-button"),{ghost:!0,danger:!0,onClick:k},{default:()=>[o("全部移除")]})]})}),s("div",{class:"absolute bottom-5 w-full text-center",style:"left:-22px;"},[s(n("a-button"),{class:"mr-10",ghost:!0,"html-type":"submit",onClick:x},{default:()=>[o("返回扫描")]}),s(n("a-button"),{ghost:!0,"html-type":"submit",onClick:x},{default:()=>[o("确定出仓")]})])]})])}});export{h as default};
